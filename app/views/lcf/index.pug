extends layout
block content
  //model-viewer(src='/lcf/glb/brancaccio_mesh.glb' camera-controls='' camera-orbit="37.8deg 73.41deg 0.3908m" poster="/lcf/glb/poster.png" min-camera-orbit="auto auto auto" max-camera-orbit="auto auto 0.3908m" camera-target="-0.69m -0.22m -0.45m" auto-rotate='')
  model-viewer(src='/lcf/glb/brancaccio_mesh.glb' camera-controls='' camera-target="-0.61m -0.15m -0.3m" min-camera-orbit="auto auto auto" max-camera-orbit="auto auto auto" ar="" ar-modes="scene-viewer webxr quick-look")
    .progress-bar.hide(slot='progress-bar')
      .update-bar
    button#ar-button(slot='ar-button')
      | View in your space
    #ar-prompt
      img(src='/lcf/glb/ar_hand_prompt.png')
  script.
     // Handles loading the events for <model-viewer>'s slotted progress bar
      const onProgress = (event) => {
        const progressBar = event.target.querySelector('.progress-bar');
        const updatingBar = event.target.querySelector('.update-bar');
        updatingBar.style.width = `${event.detail.totalProgress * 100}%`;
        if (event.detail.totalProgress === 1) {
          progressBar.classList.add('hide');
        } else {
          progressBar.classList.remove('hide');
          if (event.detail.totalProgress === 0) {
            event.target.querySelector('.center-pre-prompt').classList.add('hide');
          }
        }
      };
      document.querySelector('model-viewer').addEventListener('progress', onProgress);  //img.img-fluid(src="/lcf/images/main-img.jpg")
  // Loads <model-viewer> for browsers:
  script(type='module' src='/lcf/glb/model-viewer.min.js')
  //-.embed-responsive.embed-responsive-16by9
    iframe.embed-responsive-item(src="https://www.facebook.com/plugins/video.php?height=314&href=https%3A%2F%2Fwww.facebook.com%2Flivecinemafestival%2Fvideos%2F355583155525969%2F&show_text=false&width=560" width="560" height="314" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowfullscreen="true" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share" allowFullScreen="true")
  //-#mycarousel.carousel.slide(data-ride='carousel', data-interval="false")
    // Wrapper for slides
    .carousel-inner
      .carousel-item.active
        iframe(style="border:0" width="100%" height="100%" src="https://www.facebook.com/plugins/video.php?allowfullscreen=true&autoplay=true&href=https%3A%2F%2Fwww.facebook.com%2FLPM.LivePerformersMeeting%2Fvideos%2F837085809979657&show_text=0&width=1920" webkitallowfullscreen mozallowfullscreen allowfullscreen)
        img.d-none.w-100(src='/lpm/images/slider/LPM2019-visual-1.jpg', alt=global.__('Image for') + ': ' + 'LPM 2019 Rome | CALL TO PARTICIPATE')
        //script.
          document.onload = function(){$("#mycarousel").pause()}
      //.item.active.full-screen
        img.d-block.w-100(src='/lpm/images/slider/LPM2019-call-1.jpg', alt=global.__('Image for') + ': ' + 'LPM 2019 Rome | CALL TO PARTICIPATE')
      .carousel-item
        img.d-block.w-100(src='/lpm/images/slider/LPM2019-visual-1.jpg', alt=global.__('Image for') + ': ' + 'LPM 2019 Rome | CALL TO PARTICIPATE')
        //.carousel-caption
          a(href=lang_preurl+"/editions/2018-rome/call-to-participate/", title="LPM 2019 Rome | CALL TO PARTICIPATE") Bella
      .carousel-item
        img.d-block.w-100(src='/lpm/images/slider/AV-Performances_09.jpg', alt=global.__('Image for') + ': ' + 'LPM 2019 Rome | CALL TO PARTICIPATE')
        //.carousel-caption
          a(href=lang_preurl+"/editions/2018-rome/call-to-participate/", title="LPM 2019 Rome | CALL TO PARTICIPATE") Bella
      .carousel-item
        img.d-block.w-100(src='/lpm/images/slider/AV-Performances_14.jpg', alt=global.__('Image for') + ': ' + 'LPM 2019 Rome | CALL TO PARTICIPATE')
        //.carousel-caption
          a(href=lang_preurl+"/editions/2018-rome/call-to-participate/", title="LPM 2019 Rome | CALL TO PARTICIPATE") Bella
      .carousel-item
        img.d-block.w-100(src='/lpm/images/slider/Installations_03.jpg', alt=global.__('Image for') + ': ' + 'LPM 2019 Rome | CALL TO PARTICIPATE')
        //.carousel-caption
          a(href=lang_preurl+"/editions/2018-rome/call-to-participate/", title="LPM 2019 Rome | CALL TO PARTICIPATE") Bella
      .carousel-item
        img.d-block.w-100(src='/lpm/images/slider/Mapping_01.jpg', alt=global.__('Image for') + ': ' + 'LPM 2019 Rome | CALL TO PARTICIPATE')
        //.carousel-caption
          a(href=lang_preurl+"/editions/2018-rome/call-to-participate/", title="LPM 2019 Rome | CALL TO PARTICIPATE") Bella
      .carousel-item
        img.d-block.w-100(src='/lpm/images/slider/Talks_01.jpg', alt=global.__('Image for') + ': ' + 'LPM 2019 Rome | CALL TO PARTICIPATE')
        //.carousel-caption
          a(href=lang_preurl+"/editions/2018-rome/call-to-participate/", title="LPM 2019 Rome | CALL TO PARTICIPATE") Bella
      .carousel-item
        img.d-block.w-100(src='/lpm/images/slider/Talks_04.jpg', alt=global.__('Image for') + ': ' + 'LPM 2019 Rome | CALL TO PARTICIPATE')
        //.carousel-caption
          a(href=lang_preurl+"/editions/2018-rome/call-to-participate/", title="LPM 2019 Rome | CALL TO PARTICIPATE") Bella


    // Indicators
    ol.carousel-indicators
      li.active(data-target='#mycarousel', data-slide-to='0')
      li(data-target='#mycarousel', data-slide-to='1')
      li(data-target='#mycarousel', data-slide-to='2')
      li(data-target='#mycarousel', data-slide-to='3')
      li(data-target='#mycarousel', data-slide-to='4')
      li(data-target='#mycarousel', data-slide-to='5')
      li(data-target='#mycarousel', data-slide-to='6')

    // Controls
    a.carousel-control-prev(href='#mycarousel', role='button', data-slide='prev', title=global.__("Previous slide"))
      span.carousel-control-prev-icon(aria-hidden='true')
      span.sr-only Previous
    a.carousel-control-next(href='#mycarousel', role='button', data-slide='next', title=global.__("Nexts slide"))
      span.carousel-control-next-icon(aria-hidden='true')
      span.sr-only Next
      
  //-
    section.home.mt-3(itemscope, itemtype='http://schema.org/ItemList')
      .container-fluid
        h1.entry-title(itemprop="name") News
      .swiper-container
        !=results.news.replace(new RegExp("col-xl-3 col-lg-4 col-md-6 col-sm-6 col-xs-12 isotopeitem", 'g'), "swiper-slide").replace(new RegExp("row isotope results", 'g'), "swiper-wrapper").replace(new RegExp("pagination pagination-sm justify-content-center", 'g'), "pagination pagination-sm justify-content-center d-none")
      .container-fluid
        .text-right.boxItem
          a.btn.btn-primary.btn-sm(href="/news/", title="See all News") See all News

    section.home(itemscope, itemtype='http://schema.org/ItemList')
      .container-fluid
        h1.entry-title(itemprop="name") Satellite Events
      .swiper-container
        !=results.events.replace(new RegExp("col-xl-3 col-lg-4 col-md-6 col-sm-6 col-xs-12 isotopeitem", 'g'), "swiper-slide").replace(new RegExp("row isotope results", 'g'), "swiper-wrapper").replace(new RegExp("pagination pagination-sm justify-content-center", 'g'), "pagination pagination-sm justify-content-center d-none")
      .container-fluid
        .text-right.boxItem
          a.btn.btn-primary.btn-sm(href="/partnerships/", title="See all Events") See all Events

    section.home(itemscope, itemtype='http://schema.org/ItemList')
      .container-fluid
        h1.entry-title(itemprop="name") Productions
      .swiper-container
        !=results.editions.replace(new RegExp("col-xl-3 col-lg-4 col-md-6 col-sm-6 col-xs-12 isotopeitem", 'g'), "swiper-slide").replace(new RegExp("row isotope results", 'g'), "swiper-wrapper").replace(new RegExp("pagination pagination-sm justify-content-center", 'g'), "pagination pagination-sm justify-content-center d-none")
      .container-fluid
        .text-right.boxItem
          a.btn.btn-primary.btn-sm(href="/events/", title="See all Editions") See all Productions
